<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Zhang Xiaoyu - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">SugarMummy</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/AY1920S1-CS2103-T16-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Zhang Xiaoyu - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-sugarmummy"><a class="link" href="#project-sugarmummy">PROJECT: SugarMummy</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>SugarMummy is a desktop application used to help type-II diabetics develop healthier lifestyle. The user interacts with it using a Command Line Interface,
and its GUI is created with JavaFx. It is written in Java and has about 30 kLOC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major Feature</strong>: added <strong>recmf command</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: Recommends a list of medically suggested foods to type II diabetics.</p>
</li>
<li>
<p>Justification: This feature is crucial to diabetic patients since their health states are closely related to food consumptions.</p>
</li>
<li>
<p>Highlights: This feature benefits the extension of diet recording and analyzing, which can be done via linking the current implementation of nutrition values to dates and consumption amounts.
This can further benefit the development of more personalized food recommendations based on the user&#8217;s nutrition intake and BMI.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>added a <code>recmfmix</code> command as a concise version of <code>recmf</code> command</p>
</li>
<li>
<p>added <code>addfood</code> and <code>deletef</code> commands that allows the user to change the food database</p>
</li>
<li>
<p>added <code>resetf</code> command that allows the user to clear any modifications on the food database</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://nus-cs2103-ay1920s1.github.io/tp-dashboard/#search=zhanghuafan&amp;sort=groupTitle&amp;sortWithin=title&amp;since=2019-09-06&amp;timeframe=commit&amp;mergegroup=false&amp;groupSelect=groupByRepos&amp;breakdown=false">View RepoSense</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Set up the team organization, repo and website</p>
</li>
<li>
<p>Transferred user cases to GitHub project</p>
</li>
<li>
<p>Categorized issue tags</p>
</li>
<li>
<p>Managed releases <code>v1.2.1</code>, <code>v1.3.2</code>, <code>v1.3.3</code>, <code>1.3.6</code> (4 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Helped construct the display pane switch between commands: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/64">#64</a></p>
</li>
<li>
<p>Constructed a generic Storage class for storage reading and writing: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/65">#65</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Designed the background for the application: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/22">#22</a></p>
</li>
<li>
<p>Added application logo: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/105">#105</a></p>
</li>
<li>
<p>Updated the initial User Guide, and detailed the food recommendation feature: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/20">#20</a>, <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/110">#110</a>, <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/214">#214</a></p>
</li>
<li>
<p>Updated <code>Readme</code> and application background: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/22">#22</a></p>
</li>
<li>
<p>Helped finalize the Developer Guide, and detailed the food recommendation feature: <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/85">#85</a>, <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/185">#185</a>, <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/214">#214</a>, <a href="https://github.com/AY1920S1-CS2103-T16-1/main/pull/218">#218</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class: <a href="https://github.com/AY1920S1-CS2103T-W11-1/main/issues/225">1</a>, <a href="https://github.com/AY1920S1-CS2103T-W11-1/main/issues/228">2</a>, <a href="https://github.com/AY1920S1-CS2103T-W11-1/main/issues/227">3</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="food-recommendation"><a class="link" href="#food-recommendation">Food Recommendation</a></h3>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">General Note</dt>
</dl>
</div>
<div class="olist small">
<ol class="small">
<li>
<p>If a command requires no user-input arguments,  all the additional inputs after this command string will be ignored, and the command will be executed as usual.</p>
</li>
<li>
<p>If a command requires any parameters, the input order is flexible. Duplicate parameters are also allowed, <strong>but only the last occurrence will be considered</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="recommending-food-code-recmf-code"><a class="link" href="#recommending-food-code-recmf-code">Recommending food: <code>recmf</code></a></h4>
<div class="paragraph">
<p>Recommends medically suggested foods for type II diabetes patients. The user can specify flags and food names` as two kinds of filters, as well as one type of sorting order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Flags:</strong> specifies the wanted food types in the form of following flags:</p>
</li>
</ul>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-nsv: non-starchy vegetable</strong>, such as <em>Broccoli</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-sv: starchy vegetable</strong>, such as <em>Potato</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-f: fruit</strong>, such as <em>Cherry</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-p: protein</strong>, such as <em>Lean Lamb</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-s: snack</strong>, such <em>Fig Roll</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-m: meal</strong>, such as <em>Spanish Omelet</em></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="small"><strong>Note:</strong><br>
1. Flags are case-insensitive and duplicates are allowed, but they will be recognized only when placed before any prefix.<br>
2. If no flag is specified, it is equivalent to specifying all flags. Namely, foods of all types will be shown.</span></p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Food Names:</strong> matches foods that contain <strong>one of</strong> given food names in the form of <code>fn/[FOOD_NAME]&#8230;&#8203;</code></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="small"><strong>Note:</strong><br>
1. Matching is case-insensitive but is full-word matching. For example, "chicken" does not match "ch".<br>
2. If no food name specified after <code>fn/</code>, it is equivalent to matching all foods.</span></p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Sorting Order</strong>: determines the presentation order of food cards in <strong>one</strong> of the two forms: <code>+sort/SORT_ORDER_TYPE</code> and <code>-sort/SORT_ORDER_TYPE</code></p>
<div class="ulist">
<ul>
<li>
<p><code>+</code> indicates in ascending order and <code>-</code> descending</p>
</li>
<li>
<p><code>SORT_ORDER_TYPE</code> is required and can be one of the following six:<br>
<code>fn</code>: food name; <code>ft</code>: food type; <code>ca</code>: calorie; <code>gi</code>: glycemic index; <code>su</code>: sugar; <code>fa</code>: fat</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="small"><strong>NOTE:</strong><br>
1. <code>+sort/SOT</code> and <code>-sort/SOT</code> cannot be both present even though they may have different <code>SOT</code>(<code>SORT_ORDER_TYPE</code>).<br>
2. Specially, for <code>ft</code>, the ascending order is predefined as: nsv, sv, f, p, s, m.</span></p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>recmf [-nsv] [-sv] [-f] [-p] [-s] [-m] [fn/FOOD_NAME&#8230;&#8203;][Â±sort/SORT_ORDER_TYPE]</code></p>
</div>
<div class="paragraph">
<p><strong>Examples:</strong> <code>recmf -p -f</code>, <code>recmf fn/chicken rice</code>, <code>recmf -p -m -f fn/chicken</code>, <code>recmf -p -nsv +sort/gi</code></p>
</div>
</div>
<div class="sect3">
<h4 id="recommending-food-combination-code-recmfmix-code"><a class="link" href="#recommending-food-combination-code-recmfmix-code">Recommending food combination: <code>recmfmix</code></a></h4>
<div class="paragraph">
<p>Recommends one food from each type. A summary card will be appended at the end.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="small"><strong>Note:</strong><br>
1. Food types with no available food data will not be shown. If there is no food data at all, the summary card will not be shown as well.<br>
2. The summary data is formatted as integers. For Calorie, Sugar, and Fat, the sums of recommended foods are calculated. For GI (glycemic index) value, the average is calculated.<br>
3. For more information about GI, please refer to this <a href="https://en.wikipedia.org/wiki/Glycemic_index">link</a>.</span></p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>recmfmix</code></p>
</div>
<div class="paragraph">
<p><strong>Example:</strong> <code>recmfmix</code></p>
</div>
</div>
<div class="sect3">
<h4 id="adding-new-food-items-code-addfood-code"><a class="link" href="#adding-new-food-items-code-addfood-code">Adding new food items : <code>addfood</code></a></h4>
<div class="paragraph">
<p>Adds a new food item for future recommendations. The following six fields are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>food name: <code>fn/FOOD_NAME</code><br>
Food name should only contain alphabets, numbers, and whitespace. It should be less than 30 characters for display quality and readability.</p>
</li>
<li>
<p>food type: <code>ft/FOOD_TYPE</code><br>
Food types should be exactly one of the following: nsv(non-starchy vegetable), sv(starchy vegetable), f(fruit), p(protein), s(snack), or m(meal).</p>
</li>
<li>
<p>calorie (cal): <code>ca/CALORIE</code><br>
Calorie should be less than 700(cal) per serving.</p>
</li>
<li>
<p>gi: <code>gi/GI</code><br>
Glycemic Index should be less than 70 per serving.</p>
</li>
<li>
<p>sugar (g): <code>su/SUGAR</code><br>
Sugar should be less than 25(g) per serving.</p>
</li>
<li>
<p>fat (g): <code>fa/FAT</code><br>
Fat should be less than 35(g) per serving.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="small"><strong>Note:</strong><br>
1. No duplicate food names are allowed.<br>
2. All nutrition values should be non-negative numbers and contain no more than four decimals. Incomplete decimals, such as ".5" and "1.", can be accepted as "0.5" and "1" respectively. However, decimal point by it alone will not be accepted.<br>
3. Ideally, the input values are normalized as per serving for more practical value comparisons and calculations.</span></p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Format:</strong> <code>addfood fn/FOOD_NAME ft/FOOD_TYPE ca/CALORIE gi/GI su/SUGAR fa/FAT</code></p>
</div>
<div class="paragraph">
<p><strong>Example:</strong>
<code>addfood fn/Cucumber ft/nsv ca/15 gi/15 su/1.7 fa/0</code></p>
</div>
</div>
<div class="sect3">
<h4 id="deleting-an-existing-food-code-deletef-code"><a class="link" href="#deleting-an-existing-food-code-deletef-code">Deleting an existing food: <code>deletef</code></a></h4>
<div class="paragraph">
<p>Deletes a food that matches the specified food name.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="small"><strong>Note:</strong> FOOD_NAME matching is case-insensitive, but is strict matching for every single character, including white spaces between words.
It is also full matching. For example, "Rice with Chicken" does not match with "Chicken".</span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Format: <code>deletef fn/FOOD_NAME</code></p>
</div>
<div class="paragraph">
<p>Example:
<code>deletef fn/Mushroom</code></p>
</div>
</div>
<div class="sect3">
<h4 id="resetting-food-data-code-resetf-code"><a class="link" href="#resetting-food-data-code-resetf-code">Resetting food data: <code>resetf</code></a></h4>
<div class="paragraph">
<p>Clears all modifications, adding and deleting, on the food list. The food data will be reset to sample food data.</p>
</div>
<div class="paragraph">
<p>Format: <code>resetf</code></p>
</div>
<div class="paragraph">
<p>Example: <code>resetf</code></p>
</div>
</div>
<div class="sect3">
<h4 id="recovering-food-data-em-recoverf-em-code-coming-in-v2-0-code"><a class="link" href="#recovering-food-data-em-recoverf-em-code-coming-in-v2-0-code">Recovering food data: <em>recoverf</em> <code>[coming in v2.0]</code></a></h4>
<div class="paragraph">
<p>Recovers the food data after resetting all the foods.
The recovered data is based on the food list state just before the <strong>latest recmf command</strong>.
This would be useful if the user wrongly enter <code>resetf</code> command, or another user want to temporarily use the same jar file on the same PC.</p>
</div>
</div>
<div class="sect3">
<h4 id="editing-a-food-em-editf-em-code-coming-in-v2-0-code"><a class="link" href="#editing-a-food-em-editf-em-code-coming-in-v2-0-code">Editing a food: <em>editf</em> <code>[coming in v2.0]</code></a></h4>
<div class="paragraph">
<p>Edits the available food fields, such as food name and GI value, of an existing food.
The restrictions on field value are the same as the restrictions declared in <code>addfood</code> commands.
This would provide more flexibility to the user to manipulate food data, instead of directly deleting a food.</p>
</div>
</div>
<div class="sect3">
<h4 id="recording-and-analyzing-diets-code-coming-in-v2-0-code"><a class="link" href="#recording-and-analyzing-diets-code-coming-in-v2-0-code">Recording and analyzing diets <code>[coming in v2.0]</code></a></h4>
<div class="paragraph">
<p>Records the user&#8217;s diets on specified dates and provides daily, weekly, and monthly summaries about nutrition intakes.
This would allow the user to have an overview of his food consumption statistics.
Bases on such statistics, the user can get more specific and personalized suggestions to balance the his nutrition intake.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="food-recommendation-feature"><a class="link" href="#food-recommendation-feature">Food Recommendation Feature</a></h3>
<div class="paragraph">
<p>The food recommendation mechanism is based on the manipulation of <code>UniqueFoodList</code>, via the implementation of the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Showing food recommendations as cards</strong> filtered by <code>Flags</code> and / or <code>Food Names</code>.</p>
</li>
<li>
<p><strong>Sorting the food list</strong> according to <code>SortOrderType</code>.</p>
</li>
<li>
<p><strong>Showing combined recommendations</strong> from each food type with an additional <em>Summary</em> card.</p>
</li>
<li>
<p><strong>Adding foods</strong> and <strong>Deleting foods</strong></p>
</li>
<li>
<p><strong>Resetting food database</strong> which clears modifications on the food list done by the user</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operations are respectively exposed in the <code>Model</code> interface as <code>updateFilteredFoodList()</code>, <code>sortFoodList()</code>, <code>getMixedFoodList()</code>, <code>addFood()</code>, <code>deleteFood()</code>, <code>setFoods()</code>.</p>
</div>
<div class="paragraph">
<p><a id="recmf_overview"></a></p>
</div>
<div class="sect3">
<h4 id="data-structure-overview"><a class="link" href="#data-structure-overview">Data Structure Overview</a></h4>
<div class="paragraph">
<p>The main data structures used to support food recommendation are listed as follows.
<a id="recmf_food_model"></a></p>
</div>
<div class="paragraph">
<div class="title"><strong>1. Food Model</strong></div>
<p>It encapsulates <code>FoodName</code>, <code>FoodType</code>, and four <code>NutritionValues</code> and has the following usages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fields are visualized in <code>FoodCards</code>, which collectively compose the <code>FoodFlowPane</code>.</p>
</li>
<li>
<p>Fields are <code>Comparable</code> to support <code>sortFoodList()</code> function.</p>
</li>
<li>
<p><code>NutritionValues</code> are used by <code>FoodCalculator</code> to obtain summary statistics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/recmf/Food.java">Food.java</a></p>
</div>
<div class="paragraph">
<p><a id="recmf_uniqueFoodList"></a></p>
</div>
<div class="paragraph">
<div class="title"><strong>2. UniqueFoodList</strong></div>
<p>It holds the collection of foods, and it exposes necessary methods in <code>ModelManager</code>.
Internally, it holds an <code>ObservableList</code> available for modifications, such as adding foods.
It also implements <code>getMixedFoodList()</code> method for <code>recmfmix</code> command via randomly selecting foods from its <code>internalUnmodifiableList</code>.</p>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/recmf/UniqueFoodList.java">UniqueFoodList.java</a></p>
</div>
<div class="paragraph">
<p>The following class diagram summaries how these two main components interact.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/FoodModelClassDiagram.png" alt="[" width="500]">
</div>
</div>
<div class="paragraph">
<p><a id="recmf_predicates"></a></p>
</div>
<div class="paragraph">
<div class="title"><strong>3. Predicates</strong></div>
<p>Both <code>Predicates</code>, <code>FoodNameContainsKeywordsPredicate</code> and <code>FoodTypeIsWantedPredicate</code> hold desired conditions as <code>Collections</code>, such as <code>List</code> and <code>Set</code>.
They literate through the whole food list to select foods that matches any of given conditions.
If the conditions are empty, the <code>test()</code> result is always set to be true.</p>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/recmf/predicates/FoodNameContainsKeywordsPredicate.java">FoodNameContainsKeywordsPredicate.java</a>;
<a href="{repoURL}{generalPath}/model/recmf/predicates/FoodTypeIsWantedPredicate.java">FoodTypeIsWantedPredicate.java</a></p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-of-em-recmf-em-and-em-recmfmix-em-command"><a class="link" href="#implementation-of-em-recmf-em-and-em-recmfmix-em-command">Implementation of <em>recmf</em> and <em>recmfmix</em> command</a></h4>
<div class="sect4">
<h5 id="code-recmf-code-command"><a class="link" href="#code-recmf-code-command"><code>recmf</code> command</a></h5>
<div class="paragraph">
<p><code>RecmFoodCommandParser</code> parses user inputs to standard parameters for the customised presentation of food recommendations, detailing in the following three ways:</p>
</div>
<div class="paragraph">
<div class="title"><strong>1. Specifying flags</strong><br></div>
<p><code>Flags</code> specify food types that are intended to be shown. This design is similar to using options in Unix commands.
Available <code>Flags</code> depend on available <code>FoodTypes</code>, as they will be eventually translated to a <code>HashSet</code> of <code>FoodTypes</code> and supplied to <a href="#recmf_predicates">FoodTypeIsWantedPredicate</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If no flag is specified, <code>RecmFoodCommandParser#getWantedFoodTypes(flagsStr)</code> just returns an empty <code>HashSet</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/recmf/Flag.java">Flag.java</a>; <a href="{repoURL}{generalPath}/model/recmf/FoodType.java">FoodType.java</a></p>
</div>
<div class="paragraph">
<div class="title"><strong>2. Filtering food names</strong><br></div>
<p>It is similar to but simpler than the implementation of specifying flags. A <code>List</code> of food name strings will be supplied to <a href="#recmf_predicates">FoodNameContainsKeywordsPredicate</a>.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram shows the how <code>recmf</code> command with flag and food name as the filters works.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/RecmFoodSequenceDiagram.png" alt="RecmFoodSequenceDiagram">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The sorting related (refer to the following section) parts, such as <code>FoodComparator</code>, are omitted in this diagram.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title"><strong>3. Sorting</strong><br></div>
<p>It is implemented via supplying a <code>FoodComparator</code> to <code>model#sortFoodList()</code> method.<br>
<code>FoodComparator</code> wraps A <code>Comparator</code> to handle the main logic, such as reversing the sorting order via <code>Comparator#reversed()</code>.
An inner enum class <code>SortOrderType</code> holds all the comparable <a href="#recmf_food_model">food fields</a> for sorting.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The private <code>FoodComparator</code> constructor that directly takes in <code>Comparator</code> is for internal usage of getting reversed <code>FoodComparator</code>. Outside instantiation is done by supplying <code>SortOrderType</code> strings.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/recmf/FoodComparator.java">FoodComparator.java</a></p>
</div>
</div>
<div class="sect4">
<h5 id="code-recmfmix-code-command"><a class="link" href="#code-recmfmix-code-command"><code>recmfmix</code> command</a></h5>
<div class="paragraph">
<p><code>UniqueFoodList#getMixedFoodList()</code> generates a temporary <code>ObservableList</code> from the existing food data. This list will eventually be supplied to <code>FoodFlowPane</code> via <code>Model</code> and then <code>Logic</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Food Summary Card: It is essentially treated as <code>Food</code> with <em>Summary</em> as food name and <em>meal</em> as food type.
The total / average nutrition values are calculated by <code>FoodCalculator</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command has to override the <code>Command#isToCreateNewPane()</code> and return <code>true</code>,
since it must refresh the display pane each time by randomly getting new foods, rather than getting the existing display pane from <code>typeToPaneMap</code> (refer to <a href="{repoURL}{generalPath}/ui/MainDisplayPane.java"><code>MainDisplayPane.java</code></a>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/recmf/FoodCalculator.java">FoodCalculator.java</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="implementation-of-other-supplementary-commands"><a class="link" href="#implementation-of-other-supplementary-commands">Implementation of other supplementary commands</a></h4>
<div class="paragraph">
<p>The following three commands can be used modify the food database.</p>
</div>
<div class="sect4">
<h5 id="code-addfood-code-and-code-deletef-code-commands"><a class="link" href="#code-addfood-code-and-code-deletef-code-commands"><code>addfood</code> and <code>deletef</code> commands</a></h5>
<div class="paragraph">
<p><code>AddFoodCommandParser</code> and <code>DeleteFoodCommandParser</code> are used for parsing these two commands respectively.
Parameter validation is done by <code>RecmFoodParserUtil</code>.</p>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/parser/RecmFoodParserUtil.java">RecmFoodParserUtil.java</a></p>
</div>
</div>
<div class="sect4">
<h5 id="code-resetf-code-command"><a class="link" href="#code-resetf-code-command"><code>resetf</code> command</a></h5>
<div class="paragraph">
<p>It is implemented by setting the internal list of <code>UniqueFoodList</code> to be the sample food data in <code>SampleFoodDataUtil</code>.</p>
</div>
<div class="paragraph">
<p><strong>API:</strong> <a href="{repoURL}{generalPath}/model/util/SampleFoodDataUtil.java">SampleFoodDataUtil.java</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-usage-scenario-and-summary"><a class="link" href="#example-usage-scenario-and-summary">Example Usage Scenario and Summary</a></h4>
<div class="paragraph">
<p>Given below is an example usage scenario and how the food recommendation mechanism behaves at each step.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user launches the application and enter <code>recmf</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If it is the first time entering a command, a <code>foodlist.json</code> storage file will be created with sample food data. Otherwise, data is loaded from the existing storage file.</p>
</li>
<li>
<p><code>FoodFlowPane</code> obtains food list information from <code>Logic</code> and displays food cards to the user.</p>
</li>
</ol>
</div>
</li>
<li>
<p>The user executes <code>recmf -f -m +sort/gi</code> command.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>FoodTypeIsWantedPredicate</code> is set to select foods of <em>fruit</em> and <em>meal</em> types. <code>FoodComparator</code> is set to sort foods in ascending order based on their GI values.</p>
</li>
<li>
<p><code>Model</code> updates the <code>filteredFoodList</code> with this predicate and sorts the list with this comparator.</p>
</li>
<li>
<p><code>FoodFlowPane</code> notices the such updates from <code>Listener</code> and refreshes the GUI.</p>
</li>
</ol>
</div>
</li>
<li>
<p>The user executes <code>recmfmix</code> command.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>Logic</code> gets a list of foods from <code>UniqueFoodList#getMixedFoodList()</code>, which contains a <em>Summary</em> food calculated by <code>FoodCalculator</code>.</p>
</li>
<li>
<p><code>FoodFlowPane</code> updates its content with this new list.</p>
</li>
</ol>
</div>
</li>
<li>
<p>The user executes <code>addfood fn/Cucumber ft/nsv ca/15 gi/15 su/1.7 fa/0</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The display switches to show the full list which also contains this newly added food.</p>
</li>
<li>
<p>The storage file updates accordingly.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes the above steps.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/RecmFoodActivityDiagram.png" alt="400" width="400">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-data-structure-of-the-food-collection"><a class="link" href="#aspect-data-structure-of-the-food-collection">Aspect: Data Structure of the Food Collection</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Use a <code>List</code> to store all the foods</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The logic can be easily understood.</p>
</li>
<li>
<p>Cons: Operations on foods, such as filtering and adding, need to iterating through the whole list.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Use a <code>Map</code> that categorizes foods based on their food types</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Impoves efficiency of filtering by flags by simply <code>get()</code>. Besides, maintaining the order after adding a new food only requires to sort foods of the same type.
It can improve efficiency especially when the database is large.</p>
</li>
<li>
<p>Cons: There is no <code>FilteredMap</code> class supported by JavaFX. Extra work is needed to apply <code>Predicate</code> on the Map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-the-presentation-ui-of-food-recommendations"><a class="link" href="#aspect-the-presentation-ui-of-food-recommendations">Aspect: The presentation (UI) of food recommendations</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Show the user a pane of cards. Different types are indicated by the different colors.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement. Cheerful colors may make reading more pleasant.</p>
</li>
<li>
<p>Cons: The size of food cards cannot be customized. If the window size is relatively small, the user may need to
repeatedly scroll up and down to locate certain foods.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Use several horizontal <code>ListViews</code> to hold different food type.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The content can be more organized and the user does not need to specify the food types for filtering.
Besides, the food cards can be customized for each <code>ListView</code>, such as omitting GI and Sugar for proteins since they are usually zero.</p>
</li>
<li>
<p>Cons: The operations targeting at the whole list need to be applied separately for each food list.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-inputting-new-food-data"><a class="link" href="#aspect-inputting-new-food-data">Aspect: Inputting New Food Data</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Require inputs for all fields (e.g. calorie, gi&#8230;&#8203;).</p>
<div class="ulist">
<ul>
<li>
<p>It prevents some foods from permanently having empty fields, which may result in inaccurate sorting and summaries.</p>
</li>
<li>
<p>Cons: There is no way to add new foods with currently unavailable fields.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2: </strong> Use a separate list to hold foods with incomplete inputs.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: This makes user inputs more flexible.</p>
</li>
<li>
<p>Cons: Extra work is needed to apply changes on two lists and  transfer data from one list to the other.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="future-developments-proposed-features"><a class="link" href="#future-developments-proposed-features">Future Developments [Proposed Features]</a></h4>
<div class="ulist">
<ul>
<li>
<p>Recovering data after resetting <code>[coming in v2.0]</code><br>
This may be implemented by using a separate file to store the food data before executing <code>resetf</code> command.
This file will be updated with the current food list before the <code>resetf</code> command is executed.</p>
</li>
<li>
<p>Editing Foods <code>[coming in v2.0]</code><br>
This can be adapted from exiting <code>edit</code> command from <code>AddressBook3</code>.
However, since foods are identified by names instead of indexes, may consider using a <code>Map</code> that maps food names to food objects.</p>
</li>
<li>
<p>Recording and Analyzing diets <code>[coming in v2.0]</code><br>
This can be adapted from existing <code>Record</code> model for daily, weekly, and monthly data summaries.
The suggestions can be made via (1)calculating ideal nutrition value intake based the user&#8217;s BMI value, and (2) comparing the ideal intake amounts with the user&#8217;s actual intake amounts.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-11-11 14:09:25 UTC</div></div></div></body></html>